{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["\"use strict\";\n\nconst showsContainer = document.querySelector(\".js-shows\");\nconst favoritesContainer = document.querySelector(\".js-favorites\");\nconst input = document.querySelector(\".js-search-input\");\nconst button = document.querySelector(\".js-button\");\nlet defaultImg = \"./assets/images/wc-placeholder.jpg\";\nlet arrayShows = [];\nlet arrayShowsId = [];\nlet arrayShowsName = [];\nlet arrayShowsImg = [];\nlet favorites = [];\n\nfunction handleFavorites(ev) {\n  const favSelected = parseInt(ev.currentTarget.id);\n  const showClicked = arrayShows.find((info) => {\n    return info.show.id === favSelected;\n  });\n  const checkSelection = favorites.findIndex((fav) => {\n    return fav.show.id === favSelected;\n  });\n  if (checkSelection === -1) {\n    favorites.push(showClicked);\n  } else {\n    favorites.splice(checkSelection, 1);\n  }\n\n  ev.currentTarget.classList.toggle(\"favorite-identifier\");\n  paintFavorites();\n}\n\nfunction listenFavorites() {\n  let listFavorites = document.querySelectorAll(\".js-show\");\n  for (let favoriteSelected of listFavorites) {\n    favoriteSelected.addEventListener(\"click\", handleFavorites);\n  }\n}\n\n// function foundFavorite(show) {\n//   const favoriteFound = favorites.find((fav) => {\n//     return fav.id === show.id;\n//   });\n//   if (favoriteFound === undefined) {\n//     return false;\n//   } else {\n//     return true;\n//   }\n// }\n\nfunction paintFavorites() {\n  let html = \"\";\n  for (const favorite of favorites) {\n    if (favorite.show.image === null) {\n      html += `<li class=\"favorite js-favorite\" id = \"${favorite.show.id}\">`;\n      html += `<h4 class=\"favorite-name js-favorite-name\">${favorite.show.name}</h4>`;\n      html += `<img src=\"${defaultImg}\" alt=\"\">`;\n      html += `</li>`;\n    } else {\n      html += `<li class=\"favorite js-favorite\" id = \"${favorite.show.id}\">`;\n      html += `<h2 class=\"favorite-name js-favorite-name\">${favorite.show.name}\"</h2>`;\n      html += `<img src=\"${favorite.show.image.medium}\" alt=\"\">`;\n      html += `</li>`;\n    }\n  }\n\n  favoritesContainer.innerHTML = html;\n  //setLocalStorage();\n}\n\nfunction paintArrayShows() {\n  let html = \"\";\n  for (const info of arrayShows) {\n    arrayShowsId = info.show.id;\n    arrayShowsImg = info.show.image.medium;\n    arrayShowsName = info.show.name;\n    html += `<li class=\"js-show show\" id=\"${arrayShowsId}\">`;\n    html += `<h5>${arrayShowsName}</h5>`;\n    html += `<img class=\"show-image js-image\" src=\"${arrayShowsImg}\" alt=\"${arrayShowsName}\"/>`;\n    html += `</li>`;\n  }\n  showsContainer.innerHTML = html;\n\n  listenFavorites();\n}\n\nfunction handleSearch(ev) {\n  ev.preventDefault();\n  const inputValue = input.value;\n\n  function setInLocalStorage() {\n    const stringShows = JSON.stringify(palettes);\n    localStorage.setItem(\"shows\", stringShows);\n  }\n  function getFromApi() {\n    fetch(`//api.tvmaze.com/search/shows?q=${inputValue}`)\n      .then((response) => response.json())\n      .then((data) => {\n        arrayShows = data;\n\n        paintArrayShows();\n\n        setInLocalStorage();\n      });\n  }\n}\n\nfunction getLocalStorage() {\n  const localStorageShows = localStorage.getItem(\"favorites\");\n  if (localStorageShows === null) {\n    getFromApi();\n  } else {\n    const arrayShows = JSON.parse(localStorageShows);\n    favorite = arrayShows;\n    paintPalettes();\n  }\n}\nbutton.addEventListener(\"click\", handleSearch);\n"]}